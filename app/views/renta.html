<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TouristChain — Renta de Carros</title>
  <style>
    :root{
      --glass: rgba(255,255,255,.2);
      --shadow: 0 15px 45px rgba(0,0,0,.25);
      --radius: 18px;
      --gap: 24px;
      --accent:#facc15;
      --ok:#16a34a;
    }

    /* ===== Reset + Fondo (tema cálido por defecto) ===== */
    *,*::before,*::after{ box-sizing:border-box; }
    html,body{ margin:0; padding:0; }
    body{
      margin:0; overflow-x:hidden; min-height:100vh;
      font-family: 'Segoe UI', system-ui, -apple-system, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 600px at 50% -10%, #fccf65 0%, #f87955 60%, #ffd194 100%);
      color:#111;
      transition: background .10s ease, color .10s ease;
    }
    /* Tema frío cuando el toggle está activado */
    body.theme-cool{
      background: radial-gradient(1200px 600px at 50% -10%, #b4d7f7 0%, #7fb0ff 55%, #1247f3 100%);
      color:#0e1011;
    }

    /* Header */
    header{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; padding:16px 20px; background:rgba(255,255,255,.3);
      backdrop-filter: blur(10px);
      position:sticky; top:0; z-index:10;
    }
    .brand{ font-size:clamp(1.25rem, 2vw + 1rem, 2rem); font-weight:800; margin:0; }
    .brand span{ color:var(--accent); }
    .btn{
      border:0; border-radius:10px; padding:10px 16px; font-weight:700; cursor:pointer;
      transition: transform .06s ease, filter .2s ease;
    }
    .btn:active{ transform: scale(.98); }
    .btn-yellow{ background:var(--accent); }
    .btn-yellow:hover{ filter: brightness(1.05); }
    .btn-red{ background:var(--accent-2); }
    .btn-red:hover{ filter: brightness(1.05); }
    .btn-block{ width:100%; }

    /* Toggle moderno (calor↔frío) */
    .toggle-wrap{ position:relative; width:76px; height:38px; }
    .toggle{
      appearance:none; -webkit-appearance:none; outline:none; cursor:pointer;
      width:100%; height:100%; border-radius:999px; border:1px solid rgba(255,255,255,.5);
      background: linear-gradient(135deg, #ffd64d, #ff9f43);
      position:relative; overflow:hidden; transition: background .35s ease, box-shadow .35s ease;
      box-shadow: inset 0 0 12px rgba(255,255,255,.3), 0 4px 18px rgba(0,0,0,.15);
    }
    .toggle::before{
      content:""; position:absolute; top:4px; left:4px; width:30px; height:30px; border-radius:999px;
      background:#fff; box-shadow:0 3px 10px rgba(0,0,0,.2); transition:left .25s ease, transform .25s ease;
    }
    .toggle:checked{
      background: linear-gradient(135deg, #9fd1ff, #4b8dff);
      box-shadow: inset 0 0 14px rgba(255,255,255,.35), 0 4px 18px rgba(0,0,0,.15);
    }
    .toggle:checked::before{ left:42px; transform:rotate(180deg); }

    /* Layout principal */
    main{
      padding:24px;
      display:grid; gap:var(--gap);
      grid-template-columns: 1fr;
    }
    @media (min-width: 768px){
      main{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (min-width: 1024px){
      main{ grid-template-columns: repeat(3, 1fr); }
    }

    /* Cards */
    .card{
      background:var(--glass);
      backdrop-filter: blur(10px);
      border-radius:var(--radius);
      padding:20px;
      box-shadow: var(--shadow);
    }

    /* ADICIÓN: helper para que una card ocupe todo el ancho del grid */
    .card--full{ grid-column: 1 / -1; }

    .card h2{ margin:0 0 12px 0; font-size:1.25rem; }
    .card h3{ margin:0 0 8px 0; }

    /* Scroll area */
    .scroll-container{ max-height:250px; overflow-y:auto; margin-bottom:12px; }
    .chip{ background: rgba(255,255,255,.4); padding:8px; border-radius:10px; margin:0 0 8px 0; }

    /* Inputs */
    .input, .select, .textarea, .file{
      width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(0,0,0,.08);
      outline:none; background:#fff;
    }
    .textarea{ min-height:90px; resize:vertical; }

    /* Listas */
    .ul{ padding-left:18px; margin:0; }
    .ul li{ margin:6px 0; }

    /* Resultado ok */
    .ok{ color:var(--ok); font-weight:600; }

    /* Paquetes */
    .packages{ display:grid; gap:16px; grid-template-columns:1fr; }
    @media (min-width: 768px){ .packages{ grid-template-columns: repeat(3, 1fr); } }
    .package{ background: rgba(255,255,255,.3); border-radius:12px; padding:16px; }

    /* Explorar (hotel/restaurante) */
    .explore-grid{ display:grid; grid-template-columns:1fr; gap:16px; }
    @media (min-width: 768px){ .explore-grid{ grid-template-columns: 1fr 1fr; } }
    .explore-card{
      display:flex; gap:14px; background:rgba(255,255,255,.35); border-radius:14px; padding:14px;
      align-items:flex-start;
    }
    .explore-card img{
      width:120px; height:96px; border-radius:10px; object-fit:cover; flex-shrink:0;
      background:linear-gradient(135deg, #ffffff55, #ffffff22);
    }
    .badge{ display:inline-block; padding:2px 8px; border-radius:999px; background:#0ea5e9; color:#fff; font-size:.75rem; font-weight:700; }
    .rating{ background:#0ea5e9; }
    .price{ color:#047857; font-weight:800; }
    .meta{ font-size:.9rem; opacity:.8; }

    /* Utilidades */
    .mb-8{ margin-bottom:8px; }
    .mb-12{ margin-bottom:12px; }

    /* ===== Card 3D Hover ===== */
    .car-card{
      position:relative; width:100%; border-radius:20px; padding:18px; background:rgba(255,255,255,.35);
      box-shadow: 0 12px 28px rgba(0,0,0,.18); perspective:1200px; cursor:pointer; overflow:hidden;
      transform-style:preserve-3d;
      transition: transform .3s ease, box-shadow .3s ease, filter .3s ease;
    }
    .car-card:hover{
      transform: rotateY(20deg) rotateX(-10deg);
      box-shadow: 0 30px 50px rgba(0,0,0,.35);
      filter: brightness(1.05);
    }
    .car-media{
      position:relative; height:230px; border-radius:14px; overflow:hidden;
      transform-style:preserve-3d; will-change:transform;
    }
    .car-media img{
      width:100%; height:100%; object-fit:cover; display:block;
      transform: translateZ(30px) scale(1.05); transition: transform .3s ease;
    }
    .car-card:hover .car-media img{
      transform: translateZ(50px) scale(1.1);
    }

    /* título y specs */
    .car-info{ margin-top:12px; display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .car-title{ margin:0; font-size:1.1rem; font-weight:800; }
    .badge{ font-size:.8rem; padding:4px 10px; border-radius:999px; background:#0ea5e9; color:#fff; font-weight:800; }

    /* ADICIÓN: grilla para la flota (carros “al lado”) */
    .fleet{ display:grid; gap:16px; grid-template-columns: 1fr; }
    @media (min-width: 768px){ .fleet{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
    @media (min-width: 1280px){ .fleet{ grid-template-columns: repeat(3, minmax(0,1fr)); } }
  </style>

  <!-- ===== CSS extra SOLO para el modal de Perfil (añadido) ===== -->
  <style>
    .modal-backdrop{
      position:fixed; inset:0; display:none;
      align-items:center; justify-content:center;
      background:rgba(0,0,0,.55); backdrop-filter:blur(4px);
      z-index:1000;
    }
    .modal{
      background:#fff; border-radius:16px; padding:22px;
      width:min(92vw,560px);
      box-shadow:0 6px 24px rgba(0,0,0,.25);
    }
  </style>
</head>
<body>

<header>
  <h1 class="brand">Tourist<span>Chain</span> - Turista</h1>
  <div style="display:flex; gap:12px; align-items:center;">
    <div class="toggle-wrap" title="Cambiar tema">
      <input id="themeToggle" type="checkbox" class="toggle" />
    </div>
    <button id="btnPerfil" class="btn btn-green">Perfil</button>
    <button id="btnLogout" class="btn btn-red">Cerrar sesión</button>
  </div>
</header>

<!-- ====== PERFIL: Modal (añadido) ====== -->
<div id="perfilBackdrop" class="modal-backdrop" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="perfilTitle">
    <h2 id="perfilTitle" style="margin:0 0 8px 0;">Perfil del Usuario</h2>
    <div id="perfilContenido" class="mb-12"></div>
    <button id="cerrarModal" class="btn btn-blue" style="width:100%;">Cerrar</button>
  </div>
</div>

<main>
  <!-- Renta de Carros -->
  <!-- ADICIÓN: hago esta card a ancho completo del grid -->
  <section class="card card--full">
    <h2>Elige tu carro</h2>
    <p>Selecciona un carro para rentar y completa el formulario.</p>

    <div class="fleet" id="fleet">
      <!-- TESLA -->
      <article class="car-card" data-car='{"model":"Tesla Model S","class":"Sedán Premium","pricePerDay":320000,"img":"assets/tesla.jpg"}'>
        <div class="car-media">
          <img src="teslita.png" alt="Tesla Model S">
        </div>
        <div class="car-info">
          <h3 class="car-title">Tesla Model S</h3>
          <span class="badge">Eléctrico</span>
        </div>
      </article>

      <!-- NISSAN X-TRAIL -->
      <article class="car-card" data-car='{"model":"Nissan X-Trail","class":"SUV","pricePerDay":210000,"img":"assets/xtrail.jpg"}'>
        <div class="car-media">
          <img src="carrito2.png" alt="Nissan X-Trail">
        </div>
        <div class="car-info">
          <h3 class="car-title">Nissan X-Trail</h3>
          <span class="badge">SUV</span>
        </div>
      </article>
    </div>

    <!-- Formulario -->
    <div id="formWrap" style="margin-top:18px; display:none;">
      <h3 id="selTitle" style="margin:0 0 8px 0;"></h3>
      <form id="rentForm" novalidate>
        <div class="field">
          <label for="pickup">Fecha de entrega</label>
          <input id="pickup" type="date" required>
        </div>
        <div class="field">
          <label for="dropoff">Fecha de devolución</label>
          <input id="dropoff" type="date" required>
        </div>
        <div class="field" style="grid-column:1 / -1;">
          <label for="place">Lugar de recogida</label>
          <input id="place" type="text" placeholder="Ej. Aeropuerto El Dorado, Bogotá" required>
        </div>
        <div class="field" style="grid-column:1 / -1;">
          <label for="license">Foto de licencia</label>
          <input id="license" type="file" accept="image/*" required>
        </div>
        <div class="field">
          <label for="days">Días</label>
          <input id="days" type="number" min="1" value="1" required>
        </div>
        <div class="field">
          <label>Precio estimado</label>
          <input id="price" type="text" value="—" disabled>
        </div>
        <div style="grid-column:1 / -1; display:flex; gap:12px; align-items:center;">
          <button class="btn" id="btnRent" type="submit">Rentar</button>
          <span id="rentResult" class="ok"></span>
        </div>
      </form>
      
    </div>

  <!-- Explorar -->
  <section class="card" style="grid-column: 1 / -1;">
    <h2>Explorar</h2>
    <div class="explore-grid">
      <!-- Hotel -->
      <article class="explore-card">
        <img id="hotelImg" src="image.png" alt="GHL Bioxury Hotel" />
        <div>
          <h3><span class="badge">Hotel</span> GHL Bioxury Hotel</h3>
          <p class="meta">Chapinero, Bogotá • Fantástico <span class="badge rating">9,1</span> • 1364 comentarios</p>
          <p class="price">COP 580.000</p>
          <p>Jardín, parking privado gratis y restaurante. A 5,9 km de Unicentro.</p>
          <button id="btnHotel" class="btn btn-yellow">Ver disponibilidad</button>
        </div>
      </article>

      <!-- Restaurante -->
      <article class="explore-card">
        <img id="restImg" src="juguete.png" alt="Restaurante temático (estilo Andrés DC)" />
        <div>
          <h3><span class="badge">Restaurante</span> Temático / Estilo Andrés DC</h3>
          <p class="meta">Ambiente festivo, decoración pop, platos típicos y coctelería.</p>
          <p>Ideal para grupos, fotos y celebrar.</p>
          <button id="btnRest" class="btn btn-yellow">Reservar</button>
        </div>
      </article>
    </div>
  </section>

  <!-- Paquetes -->
  <section class="card" style="grid-column: 1 / -1;">
    <h2>Paquetes</h2>
    <div class="packages">
      <div class="package">
        <h3>Paquete Básico</h3>
        <p>Ticket Playa + Hostal Económico + Restaurante Veggie + Audi e-tron</p>
        <p class="ok">Precio: $2000</p>
      </div>
      <div class="package">
        <h3>Paquete Medium</h3>
        <p>Tour Ciudad + Hotel Futurista + Restaurante Marino + BMW i8</p>
        <p class="ok">Precio: $3000</p>
      </div>
      <div class="package">
        <h3>Paquete Premium</h3>
        <p>Aventura Extrema + Resort Playa + Gourmet Deluxe + Tesla Model X</p>
        <p class="ok">Precio: $4500</p>
      </div>
  </section>
</main>

<script>
  // ====== Tema persistente ======
  const themeToggle = document.getElementById('themeToggle');
  const saved = localStorage.getItem('tc_theme');
  if (saved === 'cool'){ document.body.classList.add('theme-cool'); themeToggle.checked = true; }
  themeToggle.addEventListener('change', () => {
    const cool = themeToggle.checked;
    document.body.classList.toggle('theme-cool', cool);
    localStorage.setItem('tc_theme', cool ? 'cool' : 'warm');
  });

  // ====== Efecto 3D Hover y Selección ======
  const cards = document.querySelectorAll('.car-card');
  let selectedCard = null;
  const formWrap = document.getElementById('formWrap');
  const selTitle = document.getElementById('selTitle');
  const priceInput = document.getElementById('price');
  const daysInput  = document.getElementById('days');
  let selectedCar  = null;

  function setTransform(card, e){
    const rect = card.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;
    const dx = (e.clientX - cx) / (rect.width/2);
    const dy = (e.clientY - cy) / (rect.height/2);
    const rotX = (+dy * 8).toFixed(2);
    const rotY = (-dx * 12).toFixed(2);
    card.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;
    const gloss = card.querySelector('.gloss');
    if(gloss){
      const mx = ((e.clientX - rect.left) / rect.width) * 100;
      const my = ((e.clientY - rect.top) / rect.height) * 100;
      gloss.style.setProperty('--mx', mx + '%');
      gloss.style.setProperty('--my', my + '%');
    }
  }

  function resetTransform(card){
    card.style.transform = 'rotateX(0deg) rotateY(0deg)';
  }

  cards.forEach(card=>{
    card.addEventListener('mousemove', e => setTransform(card, e));
    card.addEventListener('mouseleave', () => resetTransform(card));
    card.addEventListener('click', () => {
      if(selectedCard) selectedCard.classList.remove('is-selected');
      selectedCard = card;
      card.classList.add('is-selected');

      selectedCar = JSON.parse(card.dataset.car);
      selTitle.textContent = `Reservando: ${selectedCar.model} • ${selectedCar.class} — COP ${selectedCar.pricePerDay.toLocaleString()}/día`;
      formWrap.style.display = 'block';
      updatePrice();
      card.animate([{transform:'translateY(-2px) scale(1.02)'},{transform:card.style.transform}], {duration:180, easing:'ease-out'});
    }, {passive:true});
  });

  function updatePrice(){
    if(!selectedCar) return;
    const days = Math.max(1, parseInt(daysInput.value || '1', 10));
    const total = days * selectedCar.pricePerDay;
    priceInput.value = 'COP ' + total.toLocaleString();
  }
  daysInput.addEventListener('input', updatePrice);

  // ====== Reserva ======
  const rentForm = document.getElementById('rentForm');
  rentForm.addEventListener('submit', (e)=>{
    e.preventDefault();
    if(!selectedCar){ alert('Selecciona un carro'); return; }
    const pickup = document.getElementById('pickup').value;
    const drop   = document.getElementById('dropoff').value;
    const place  = document.getElementById('place').value.trim();
    const lic    = document.getElementById('license').files[0];
    if(!pickup || !drop || !place || !lic){ alert('Completa todos los campos'); return; }
    const msg = `Carro ${selectedCar.model} reservado del ${pickup} al ${drop} en ${place}.`;
    document.getElementById('rentResult').textContent = msg;
  });
</script>

<!-- ====== JS del Perfil (añadido; usa tu botón #btnPerfil) ====== -->
<script>
  const defaultUser = {
    name: 'ronnie García',
    email: 'noviodeivanGarcía@example.com',
    plan: 'Turista Básico'
  };
  const user = JSON.parse(localStorage.getItem('tc_user') || 'null') || defaultUser;

  const perfilBtn       = document.getElementById('btnPerfil');
  const perfilBackdrop  = document.getElementById('perfilBackdrop');
  const cerrarModal     = document.getElementById('cerrarModal');
  const perfilContenido = document.getElementById('perfilContenido');

  function renderPerfil(u){
    perfilContenido.innerHTML = `
      <p><strong>Nombre:</strong> ${u.name}</p>
      <p><strong>Email:</strong> ${u.email}</p>
      <p><strong>Plan:</strong> ${u.plan}</p>
    `;
  }
  renderPerfil(user);

  perfilBtn.addEventListener('click', () => {
    perfilBackdrop.style.display = 'flex';
    perfilBackdrop.setAttribute('aria-hidden', 'false');
  });
  cerrarModal.addEventListener('click', () => {
    perfilBackdrop.style.display = 'none';
    perfilBackdrop.setAttribute('aria-hidden', 'true');
  });
  perfilBackdrop.addEventListener('click', (e) => {
    if (e.target === perfilBackdrop) cerrarModal.click();
  });
</script>

</body>
</html>
